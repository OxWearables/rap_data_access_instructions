# Aim

These notes are for you if you:
- want to upload a file to the RAP from the VM
- want to download a file from the RAP to the VM


We are going to use the command line interface to transfer the file directly and securely from the VM to the RAP. 

**Reasons you might want to upload a file to the RAP:** You have processed the accelerometer data on BMRC (yay!) and can access a summary file containing the accelerometer phenotypes on your VM. You now want to upload it to the RAP to link it with other participant data.

**Reasons you might want to download a file from the RAP:** PLEASE DO NOT DO THIS IN GENERAL! But, you may want to download a text file containing participant IDs in your cohort from the RAP to your VM so you only process the subset of accelerometer data you need. 



# Steps

1. Login to the VM and complete all steps below on the VM.

2. Load a pip environment (to allow you control over package installation):
```bash
python3 -m venv env_for_dx
source env_for_dx/bin/activate
```

3. Navigate to the folder containing the files you need locally*.

4. Run `pip3 install dxpy` ([Downloads - DNAnexus Documentation](https://documentation.dnanexus.com/downloads))).You may find you need to update pip: `pip install --upgrade pip`.

5. Run `dx login` to log you in to the RAP ([Command Line Quickstart - DNAnexus Documentation](https://documentation.dnanexus.com/getting-started/cli-quickstart). You will need to enter your username and password. You may also have to select the project you want. 

6. Run `dx cd users/Rosemary_Walmsley32` to navigate between directories on the RAP. [This is just an example - navigate to the folder you want, not to my folder :)] You can read more about the dx command line interface in the links, but you can also run other commands prefaced by dx (e.g. `dx ls`) 

7. To download the file my_eid_list.txt, run `dx download my_eid_list.txt`. 

8. To upload the file accelerometer_summary.csv, run `dx upload accelerometer_summary.csv`. 

[Note the similarities with how you work with files in the temporary storage on a cloud instance.]

9. Logout using `dx logout`. Your file should now be downloaded/ uploaded. 




*This is not strictly necessary. You can control it using filepaths later. But this keeps it simple. 